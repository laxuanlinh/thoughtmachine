# Vault Core fundamentals

## Legacy banking platforms
- Old system for just some products
- More functionalities, reporting, ...
- Duplication, disjoined data, no real-time reporting
## Vault Core
- Vault Core API: interact with external applications, it does authentication, smart contracts, simulation, role management...
- Postings: keeps track of all movement of funds within Vault Core, credit, debit...
- Streaming: real-time streaming with Kafka, events like accounting, posting events, customer change ...
- Vault Core has 3 main functionalities:
    - Implement bank's portfolio: saving, credit accounts, mortgages ...
    - Maintain customer accounts
    - Generate and record postings in and out of the accounts
- Vault Core Ledger records the postings once they're accepted into Vault Core, this is a common platform that any banks can use
- Smart Contracts are code modules, implemented in Product Engine, allows to reuse code, customize ...

## Vault Core Product Engine
- Smart contracts allow any products to be implemented
- Can replicate existing products for migration
- Can use SDK to build or use existing products in product library (generic product, saving account...)
- Built-in testing framework to unit test, mock and simulate.

## Vault Core Ledger
- Rich: Capture multiple partitions of an account, different denomincations, assets, monitor and maximize/minimize interest
- Expressive: Can slice and dice balances into any structure, no limit transparancy, personalized reporting
- Real-time: Stream events, monitor behaviors and maximize/minimize interest
- Can manage any line of funds, currencies, coins or reward points

## Developing Banking Products
- Written in subset of Python, use common functionalities via Contracts API
- Can look into the code the see how it caculcate interest rate ..etc...
- Can be configured to be executed automatically via life cycle hooks when a customer does something
- Can pass parameters

## Smart Contract Hooks
- Contract events: when execute or upgrade a contract on an account for example when opening and closing accounts
    - Post-activate
    - Upgrade
    - Close code.
- Scheduled events: configurable via Smart Contract
    - Execution schedules: returns set of events, schedules that they run on
    - Scheduled code: returns when a scheduled event is executed, for example recurring payments
- Posting events: when an event is posted into the Ledger
    - Pre-posting: before the posting, determines whether the event is accepted into the Ledger
    - Post-posting: runs after an event is posted successfully
    - Pre-parameter: runs everytime there is a request to update the instance level parameters
    - Post-parameter change: run when parameters are updated.
- Parameter events

## Vault Core Integration
- Responsibilities:
    - **Manufactering products** with Smart Contracts, writing python code and deploy to Vault Core
    - **Managing accounts**, every time a customer opens a new account, a Smart Contract is executed to determine the parameters and operations of this account
    - **Postings**: either via Postings API or the Smart Contracts can generate events themselves. The Ledger records these events
    - **Managing customers**: *Vault Core cannot handle PII* so these information has to be stored some where else. The holding of a customer in Vault Core is linked to this information via a *unique ID*.

- Other functionalities within a bank:
    - **KYC and AML**: verify identities and avoid risky customers
    - **Cards and payments**: make and receive payments from other banks
    - **Fraud monitoring**
    - **Credit scoring and credit risks**: who to lend to and how much
    - **Data reporting and analysis**

# Vault Core Architecture
## Vault Core APIs
- There are 4 entities that Vault Core is responsible for:
    - Product: these are smart contract written in Python and can be deployed to Vault. Vault will run these contracts and other microservices will carry out the relevants tasks dictated by the Python code.
    - Account: there are 2 types of account: Internal and Customer account. The Customer account is an instance of a smart contract so when a customer opens an account, a version of a smart contract is run. Each customer account has balances.
    - Postings: these are events generated and kept track by the Vault Core when there are movements of funds. There are 2 sources of postings: Postings API and Contract API. Postings API will be used in the lifecycle of funds transfer. Contract API is used when needed, for example when the interest or fee accumulates. The ledger persists any events generated by both sources.
    - Customer: unique ID to link with external Customer Relationship Management (CRM)

## Thought Machine Application Architecture
- There are 2 layers of TM application:
    - Configuration Layer: customizable, TM provides tools and training, specific for each client
    - Platform Layer: common for all clients
- The Configuration Layer is totally customizable for the end user. It comprises of Chart of Accounts and Smart Contracts.
- The client can build their own applications based on their needs, using the tooling and training from TM.
- The Platform Layer is built by TM and the client can only use the APIs to upload the content of Configuration Layer like Smart Contracts so that the Vault can run them.
- Vault Core can be run with only the changes from Configuration Layer (Smart Contracts)
- Each smart contract can be scheduled to run certain functions instead of relying on a global schedule.
- Instead of having multiple APIs/components for types of payments, Vault Core has only 1 postings/payments API that any payments can hook on the same way.
- Payment devices like credit cards are not depenedent on the account logic so 1 device and be hooked onto multiple accounts. For example a payment card can be associated with a debit account and a credit account account and the customer can switch between them.
- Cloud native, highly available, can run in multiple regions, can use CSP's backup solution instead of manual backup.

## Creative Migration Strategies
- 